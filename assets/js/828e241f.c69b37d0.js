"use strict";(self.webpackChunktransloco_docs=self.webpackChunktransloco_docs||[]).push([[1056],{3905:function(e,n,t){t.d(n,{Zo:function(){return u},kt:function(){return g}});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=r.createContext({}),c=function(e){var n=r.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},u=function(e){var n=c(e.components);return r.createElement(s.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),d=c(t),g=a,f=d["".concat(s,".").concat(g)]||d[g]||p[g]||o;return t?r.createElement(f,l(l({ref:n},u),{},{components:t})):r.createElement(f,l({ref:n},u))}));function g(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,l=new Array(o);l[0]=d;var i={};for(var s in n)hasOwnProperty.call(n,s)&&(i[s]=n[s]);i.originalType=e,i.mdxType="string"==typeof e?e:a,l[1]=i;for(var c=2;c<o;c++)l[c]=t[c];return r.createElement.apply(null,l)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},4225:function(e,n,t){t.r(n),t.d(n,{assets:function(){return u},contentTitle:function(){return s},default:function(){return g},frontMatter:function(){return i},metadata:function(){return c},toc:function(){return p}});var r=t(7462),a=t(3366),o=(t(7294),t(3905)),l=["components"],i={title:"Hack The Library",description:"Hack The Library | Transloco Angular i18n"},s=void 0,c={unversionedId:"hack",id:"hack",title:"Hack The Library",description:"Hack The Library | Transloco Angular i18n",source:"@site/docs/hack.mdx",sourceDirName:".",slug:"/hack",permalink:"/transloco/docs/hack",draft:!1,editUrl:"https://github.com/jsverse/transloco/edit/master/docs/docs/hack.mdx",tags:[],version:"current",frontMatter:{title:"Hack The Library",description:"Hack The Library | Transloco Angular i18n"},sidebar:"docs",previous:{title:"The Transpiler",permalink:"/transloco/docs/transpiler"},next:{title:"Blog Posts",permalink:"/transloco/docs/blog-posts"}},u={},p=[{value:"The Loader",id:"the-loader",level:2},{value:"The Interceptor",id:"the-interceptor",level:2},{value:"Missing Handler",id:"missing-handler",level:2},{value:"Fallback Strategy",id:"fallback-strategy",level:2}],d={toc:p};function g(e){var n=e.components,t=(0,a.Z)(e,l);return(0,o.kt)("wrapper",(0,r.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"the-loader"},"The Loader"),(0,o.kt)("p",null,"The loader provides you with the ability to override the default handling of translation file loading."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"import { TranslocoLoader } from '@jsverse/transloco';\n\nexport class CustomLoader implements TranslocoLoader {\n  getTranslation(lang: string) {\n    if(langInLocalStorage) {\n      return of(langFromStorage);\n    }\n\n    return ...\n  }\n}\n")),(0,o.kt)("h2",{id:"the-interceptor"},"The Interceptor"),(0,o.kt)("p",null,"The interceptor provides you with the ability to manipulate the translation object before it is saved by the service."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"import { TranslocoInterceptor } from '@jsverse/transloco';\n\nexport class CustomInterceptor implements TranslocoInterceptor {\n  preSaveTranslation(translation: Translation, lang: string): Translation {\n    return translation;\n  }\n\n  preSaveTranslationKey(key: string, value: string, lang: string): string {\n    return value;\n  }\n}\n")),(0,o.kt)("h2",{id:"missing-handler"},"Missing Handler"),(0,o.kt)("p",null,"This handler is responsible for handling missing keys. The default handler calls ",(0,o.kt)("inlineCode",{parentName:"p"},"console.warn()")," with the key when config.isProdMode is set to ",(0,o.kt)("inlineCode",{parentName:"p"},"false"),", and returns an empty string to use as a replacement for the missing key's value."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"import { TranslocoMissingHandler } from '@jsverse/transloco';\n\nexport class CustomHandler implements TranslocoMissingHandler {\n  handle(key: string, config: TranslocoConfig) {\n    return '...';\n  }\n}\n")),(0,o.kt)("h2",{id:"fallback-strategy"},"Fallback Strategy"),(0,o.kt)("p",null,"The fallback strategy is responsible for loading the fallback translation file, when the selected active language has failed to load. The default behavior is to load the language set in the ",(0,o.kt)("inlineCode",{parentName:"p"},"config.fallbackLang"),", and set it as the new active language."),(0,o.kt)("p",null,"When you need more control over this functionality, you can define your own strategy:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"import { TranslocoFallbackStrategy } from '@jsverse/transloco';\n\nexport class CustomStrategy implements TranslocoFallbackStrategy {\n  getNextLangs(failedLang: string) {\n    return '...';\n  }\n}\n")),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"getNextLangs")," method is called with the failed language, and should return an array containing the next languages to load, in order of preference."))}g.isMDXComponent=!0}}]);